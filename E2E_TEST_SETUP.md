# E2E í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

E2E í…ŒìŠ¤íŠ¸ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ë„ë¡ í™˜ê²½ì„ ì¬ì„¤ì •í–ˆìŠµë‹ˆë‹¤. ì´ì „ì—ëŠ” í•­ìƒ `realEvents.json`ì„ ê±´ë“œë¦¬ê³  ìˆì—ˆëŠ”ë°, ì´ì œëŠ” `e2e.json`ì„ ì‚¬ìš©í•˜ë„ë¡ ë¶„ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ”§ ì£¼ìš” ìˆ˜ì • ì‚¬í•­

### 1. **Server.js í™˜ê²½ë³€ìˆ˜ ë¶„ê¸° ê°œì„ **
- **íŒŒì¼**: `server.js` (ë¼ì¸ 14-17)
- **ë³€ê²½**: `TEST_ENV` í™˜ê²½ë³€ìˆ˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë¡œê¹…
- **íš¨ê³¼**: E2E í…ŒìŠ¤íŠ¸ ì¤‘ì— ì–´ëŠ DBë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ëª…í™•íˆ í™•ì¸ ê°€ëŠ¥

```javascript
// E2E í…ŒìŠ¤íŠ¸ í™˜ê²½ì¸ì§€ í™•ì¸ (ëª…ì‹œì  ë¡œê¹… ì¶”ê°€)
const isE2eTest = process.env.TEST_ENV === 'e2e';
const dbName = isE2eTest ? 'e2e.json' : 'realEvents.json';
console.log(`[Server] TEST_ENV: ${process.env.TEST_ENV}, Using database: ${dbName}`);
```

### 2. **Playwright í™˜ê²½ë³€ìˆ˜ ì „ë‹¬ ê°œì„ **
- **íŒŒì¼**: `playwright.config.ts` (ë¼ì¸ 24-32)
- **ë³€ê²½**: 
  - ì»¤ë§¨ë“œ ë¼ì¸ì— `TEST_ENV=e2e` ëª…ì‹œ
  - env ê°ì²´ì—ë„ ë™ì¼í•˜ê²Œ ì„¤ì •
- **íš¨ê³¼**: í™˜ê²½ë³€ìˆ˜ê°€ Node.js ì„œë²„ì— ì œëŒ€ë¡œ ì „ë‹¬ë¨

```typescript
webServer: {
  command: 'TEST_ENV=e2e pnpm start',
  url: 'http://localhost:5173',
  reuseExistingServer: !process.env.CI,
  env: {
    TEST_ENV: 'e2e',
    NODE_ENV: 'test',
  },
},
```

### 3. **E2E í…ŒìŠ¤íŠ¸ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸**
- **íŒŒì¼**: `scripts/init-e2e.js` (ìƒˆ íŒŒì¼)
- **ê¸°ëŠ¥**: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ `e2e.json`ì„ ê¹¨ë—í•œ ìƒíƒœë¡œ ì´ˆê¸°í™”
- **ì‹¤í–‰ ì‹œì **: `pnpm e2e` ëª…ë ¹ ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì‹¤í–‰

```bash
pnpm e2e:init  # ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥
```

### 4. **Package.json ìŠ¤í¬ë¦½íŠ¸ ì—…ë°ì´íŠ¸**
- **íŒŒì¼**: `package.json` (ë¼ì¸ 22-25)
- **ë³€ê²½**: ëª¨ë“  E2E ì»¤ë§¨ë“œì— `e2e:init` ì¶”ê°€

```json
"e2e:init": "node scripts/init-e2e.js",
"e2e": "pnpm e2e:init && TEST_ENV=e2e playwright test",
"e2e:ui": "pnpm e2e:init && TEST_ENV=e2e playwright test --ui",
"e2e:debug": "pnpm e2e:init && TEST_ENV=e2e playwright test --debug"
```

### 5. **E2E í…ŒìŠ¤íŠ¸ íŒŒì¼ ê°œì„ **
- **íŒŒì¼**: `src/__tests__/E2e/basicEventManagement.e2e.spec.ts`
- **ë³€ê²½**:
  - API ì‘ë‹µ í™•ì¸ (201 ìƒíƒœì½”ë“œ)
  - íƒ€ì„ìŠ¤íƒí”„ë¥¼ ì‚¬ìš©í•œ ìœ ë‹ˆí¬í•œ ì´ë²¤íŠ¸ ìƒì„±
  - ëª…ì‹œì  ë¡œê¹… ì¶”ê°€ (ë””ë²„ê¹… ìš©ì´)
  - ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ëŒ€ê¸° ë©”ì»¤ë‹ˆì¦˜

### 6. **setupTests.ts ë¡œê¹… ê°œì„ **
- **íŒŒì¼**: `src/setupTests.ts` (ë¼ì¸ 9-13)
- **ë³€ê²½**: ì–´ëŠ handlerë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ëª…í™•íˆ í‘œì‹œ

```typescript
console.log('[setupTests] ---------------------')
console.log('[setupTests] TEST_ENV:', process.env.TEST_ENV);
console.log('[setupTests] isE2eMode:', isE2eMode);
console.log('[setupTests] Using handlers:', isE2eMode ? 'e2eHandlers' : 'handlers');
console.log('[setupTests] ---------------------')
```

### 7. **realEvents.json ë³µêµ¬**
- **íŒŒì¼**: `src/__mocks__/response/realEvents.json`
- **ë³€ê²½**: ê¸°ë³¸ ê°œë°œ ë°ì´í„°ë¡œ ë³µêµ¬ (E2E í…ŒìŠ¤íŠ¸ ì˜¤ì—¼ ì œê±°)

---

## ğŸ“ ë°ì´í„° íŒŒì¼ êµ¬ì¡°

### `e2e.json` (E2E í…ŒìŠ¤íŠ¸ìš©)
- **ìš©ë„**: E2E í…ŒìŠ¤íŠ¸ ì „ìš©
- **íŠ¹ì§•**: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ì— í•­ìƒ ì´ˆê¸°í™”
- **ë°ì´í„°**: í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì— í•„ìš”í•œ ê¸°ë³¸ ë°ì´í„°ë§Œ í¬í•¨
- **íŒŒì¼ ê²½ë¡œ**: `src/__mocks__/response/e2e.json`

### `realEvents.json` (ê°œë°œìš©)
- **ìš©ë„**: ë¡œì»¬ ê°œë°œ ë° ìˆ˜ë™ í…ŒìŠ¤íŠ¸
- **íŠ¹ì§•**: ê°œë°œ ê³¼ì •ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒ˜í”Œ ë°ì´í„°
- **íŒŒì¼ ê²½ë¡œ**: `src/__mocks__/response/realEvents.json`

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
pnpm e2e
```
- `e2e.json` ì´ˆê¸°í™” í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### 2. E2E í…ŒìŠ¤íŠ¸ UI ëª¨ë“œ
```bash
pnpm e2e:ui
```
- ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸ ì§„í–‰ ìƒí™© ì‹¤ì‹œê°„ í™•ì¸

### 3. E2E í…ŒìŠ¤íŠ¸ ë””ë²„ê·¸ ëª¨ë“œ
```bash
pnpm e2e:debug
```
- ê° ë‹¨ê³„ë³„ë¡œ ì¼ì‹œì •ì§€í•˜ë©° ë””ë²„ê¹…

### 4. E2E ì´ˆê¸°í™”ë§Œ ì‹¤í–‰
```bash
pnpm e2e:init
```
- `e2e.json`ì„ ì´ˆê¸° ìƒíƒœë¡œ ë³µêµ¬

---

## ğŸ” í™˜ê²½ë³€ìˆ˜ ë™ì‘ íë¦„

### E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ:
```
1. pnpm e2e ëª…ë ¹ ì‹¤í–‰
2. â†“
3. scripts/init-e2e.js ì‹¤í–‰ (e2e.json ì´ˆê¸°í™”)
4. â†“
5. TEST_ENV=e2eë¡œ ì„¤ì •ëœ ìƒíƒœì—ì„œ playwright ì‹œì‘
6. â†“
7. Playwrightê°€ ì›¹ì„œë²„ë¥¼ TEST_ENV=e2e í™˜ê²½ì—ì„œ ì‹œì‘
8. â†“
9. Server.jsì—ì„œ process.env.TEST_ENV === 'e2e' í™•ì¸
10. â†“
11. dbName = 'e2e.json' ì‚¬ìš©
12. â†“
13. ëª¨ë“  API ìš”ì²­ì´ e2e.jsonì— ì €ì¥/ì¡°íšŒë¨
```

### ì¼ë°˜ ê°œë°œ ì‹œ:
```
1. pnpm dev ëª…ë ¹ ì‹¤í–‰ (TEST_ENV ì„¤ì • ì•ˆ ë¨)
2. â†“
3. Server.jsì—ì„œ process.env.TEST_ENV ì²´í¬
4. â†“
5. dbName = 'realEvents.json' ì‚¬ìš©
6. â†“
7. ëª¨ë“  API ìš”ì²­ì´ realEvents.jsonì— ì €ì¥/ì¡°íšŒë¨
```

---

## âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

- [ ] ì„œë²„ ë¡œê·¸ì— `[Server] TEST_ENV: e2e, Using database: e2e.json` ì¶œë ¥ í™•ì¸
- [ ] `setupTests` ë¡œê·¸ì— í•¸ë“¤ëŸ¬ ì„¤ì • í™•ì¸
- [ ] E2E í…ŒìŠ¤íŠ¸ ë¡œê·¸ì— ê° ë‹¨ê³„ë³„ ì§„í–‰ ìƒí™© ì¶œë ¥
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ `e2e.json`ì´ ìƒˆë¡œìš´ ì´ë²¤íŠ¸ë¡œ ìˆ˜ì •ë¨
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ `realEvents.json`ì€ ë³€ê²½ë˜ì§€ ì•ŠìŒ

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ: "í•­ìƒ realEvents.jsonì„ ê±´ë“œë¦°ë‹¤"
**ì›ì¸**: `TEST_ENV` í™˜ê²½ë³€ìˆ˜ê°€ ì„œë²„ì— ì „ë‹¬ë˜ì§€ ì•ŠìŒ

**í•´ê²°**:
```bash
# ëª…ì‹œì ìœ¼ë¡œ TEST_ENV ì„¤ì •
TEST_ENV=e2e pnpm start

# ë˜ëŠ” e2e ëª…ë ¹ ì‚¬ìš©
pnpm e2e
```

### ë¬¸ì œ: "í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ì—ë„ e2e.jsonì´ ì´ˆê¸° ìƒíƒœë¡œ ëŒì•„ê°€ì§€ ì•ŠìŒ"
**ì›ì¸**: `e2e:init` ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**í•´ê²°**:
```bash
# ìˆ˜ë™ìœ¼ë¡œ ì´ˆê¸°í™”
pnpm e2e:init

# ê·¸ í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pnpm e2e
```

### ë¬¸ì œ: "í¬íŠ¸ ì¶©ëŒë¡œ ì¸í•´ ì„œë²„ê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ"
**ì›ì¸**: ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ê°€ í¬íŠ¸ë¥¼ ì‚¬ìš© ì¤‘

**í•´ê²°**:
```bash
# í¬íŠ¸ ê°•ì œ ì¢…ë£Œ
lsof -ti:3000 | xargs kill -9

# í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰
pnpm e2e
```

---

## ğŸ“š ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ìš©ë„ | ìˆ˜ì • ì—¬ë¶€ |
|------|------|---------|
| `server.js` | Express ì„œë²„ | âœ… ìˆ˜ì • |
| `playwright.config.ts` | Playwright ì„¤ì • | âœ… ìˆ˜ì • |
| `package.json` | ìŠ¤í¬ë¦½íŠ¸ | âœ… ìˆ˜ì • |
| `src/setupTests.ts` | í…ŒìŠ¤íŠ¸ ì„¤ì • | âœ… ê°œì„  |
| `scripts/init-e2e.js` | E2E ì´ˆê¸°í™” | âœ¨ ìƒì„± |
| `src/__mocks__/response/e2e.json` | E2E í…ŒìŠ¤íŠ¸ ë°ì´í„° | âœ¨ ìƒì„±/ì´ˆê¸°í™” |
| `src/__mocks__/response/realEvents.json` | ê°œë°œ ë°ì´í„° | âœ… ë³µêµ¬ |
| `src/__tests__/E2e/basicEventManagement.e2e.spec.ts` | E2E í…ŒìŠ¤íŠ¸ | âœ… ê°œì„  |

---

## ğŸ’¡ ì£¼ìš” ê°œì„ ì‚¬í•­ ìš”ì•½

âœ… **í™˜ê²½ë³€ìˆ˜ ë¶„ê¸°**: `TEST_ENV`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•˜ê³  í™•ì¸
âœ… **ë°ì´í„° ê²©ë¦¬**: `e2e.json`ê³¼ `realEvents.json` ì™„ì „ ë¶„ë¦¬
âœ… **ìë™ ì´ˆê¸°í™”**: í…ŒìŠ¤íŠ¸ ì „ `e2e.json` ìë™ ì´ˆê¸°í™”
âœ… **ëª…ì‹œì  ë¡œê¹…**: ê° ë‹¨ê³„ì—ì„œ ì–´ë–¤ ì„¤ì •ì´ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
âœ… **ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í…ŒìŠ¤íŠ¸**: API ì‘ë‹µ í™•ì¸, ì ì ˆí•œ íƒ€ì´ë° ì„¤ì •
âœ… **ë””ë²„ê¹… ìš©ì´**: íƒ€ì„ìŠ¤íƒí”„ ê¸°ë°˜ì˜ ìœ ë‹ˆí¬í•œ ì´ë²¤íŠ¸ë¡œ ì¶”ì  ìš©ì´


